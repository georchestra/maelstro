From 28f3bc9691e02c9897aa5d774bd03e3d0604ed94 Mon Sep 17 00:00:00 2001
From: Jean-Michel Crepel <jean-michel.crepel@camptocamp.com>
Date: Tue, 14 Jan 2025 12:20:28 +0100
Subject: [PATCH] tweat gateway config to host maelstro backend service

---
 gateway/routes.yaml | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

diff --git a/gateway/routes.yaml b/gateway/routes.yaml
index 86c25b9..3ca3c2f 100644
--- a/gateway/routes.yaml
+++ b/gateway/routes.yaml
@@ -10,7 +10,7 @@ spring:
         predicates:
         - Path=/
         filters:
-        - RedirectTo=308, /datahub/
+        - RedirectTo=308, /geonetwork/
       - id: header
         uri: ${georchestra.gateway.services.header.target}
         predicates:
@@ -59,6 +59,13 @@ spring:
         uri: ${georchestra.gateway.services.ogc-api-records.target}
         predicates:
         - Path=/ogc-api-records/**
+      - id: maelstro-back
+        uri: ${georchestra.gateway.services.maelstro-back.target}
+        predicates:
+        - Path=/maelstrob/**
+        filters:
+        - RewritePath=/maelstrob/(?<segment>.*),/$\{segment}
+
 
 georchestra.gateway.services:
   console.target: http://${CONSOLE_HOST}:8080/console/
@@ -71,3 +78,4 @@ georchestra.gateway.services:
   import.target: http://${IMPORT_HOST}:80/
   mapstore.target: http://${MAPSTORE_HOST}:8080/mapstore/
   ogc-api-records.target: http://${OGC_API_RECORDS_HOST}:8080/ogc-api-records/
+  maelstro-back.target: http://${MAELSTRO_HOST}:8000/
-- 
2.34.1

